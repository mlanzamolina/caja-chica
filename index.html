<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" href="/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#000000" />
    <meta
      name="description"
      content="A Todo List App built on MongoDB Atlas."
    />
    <link rel="apple-touch-icon" href="/logo192.png" />
    <link rel="manifest" href="/manifest.json" />
    <script src="https://unpkg.com/realm-web/dist/bundle.iife.js"></script>
<script>
const APP_ID = "< YOUR APP_ID >";
const app = new Realm.App({ id: APP_ID});
//Grab Tokens
const params = new URLSearchParams(window.location.search);
const token = params.get('token');
const tokenId = params.get('tokenId');
//Confirm client
if (token && tokenId) {
    app.emailPasswordAuth
        .confirmUser({token, tokenId})
        .then(() => displayResult('success'))
        .catch(err => displayResult('error', err))
} else {
    displayResult('error', 'Missing token or tokenId in URL parameters')
}
//Display Message depending on result
function displayResult(result, err) {
    const message = document.getElementById("message");
    if (result === "success") {
        message.innerText = "Your E-mail address has been verified.\n\n You may close this page. Thank you.";
    }
   else if (result === "error") {
       message.innerText = "Unable to register this user. Please try again to register. " + err;
   }
}
</script>
  </head>
  <body>
    <noscript>You need to enable JavaScript to run this app.</noscript>
    <div id="root"></div>
    <h5 id = "message"></h5>
    <script type="module" src="/src/index.jsx"></script>
  </body>
</html>
